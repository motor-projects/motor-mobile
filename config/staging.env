# 预发布环境配置
NODE_ENV=staging
ENVIRONMENT=staging

# 应用配置
APP_NAME=motorcycle-staging
APP_VERSION=1.0.0-staging
API_VERSION=v1

# 数据库配置
MONGODB_URI=mongodb://mongodb-service:27017/motorcycle_staging
MONGODB_DATABASE=motorcycle_staging
MONGODB_REPLICA_SET=rs0
MONGODB_MAX_POOL_SIZE=5
MONGODB_MIN_POOL_SIZE=1

# Redis 配置
REDIS_HOST=redis-service
REDIS_PORT=6379
REDIS_DB=1
REDIS_CONNECT_TIMEOUT=5000
REDIS_COMMAND_TIMEOUT=3000

# 安全配置
JWT_SECRET=${JWT_SECRET}
JWT_EXPIRES_IN=12h
API_KEY=${API_KEY}
SESSION_SECRET=${SESSION_SECRET}
BCRYPT_ROUNDS=10

# 服务器配置
PORT=3000
HOST=0.0.0.0
CORS_ORIGIN=https://staging.motorcycle.example.com
CORS_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With

# 日志配置
LOG_LEVEL=debug
LOG_FORMAT=json
LOG_MAX_FILES=5
LOG_MAX_SIZE=5m

# 监控配置
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=staging
METRICS_ENABLED=true
HEALTH_CHECK_ENABLED=true

# 缓存配置
CACHE_TTL=1800
CACHE_ENABLED=true
CACHE_PREFIX=motorcycle:staging

# 限流配置
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX=500
RATE_LIMIT_SKIP_SUCCESSFUL=false

# 文件上传配置
UPLOAD_MAX_SIZE=52428800
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/webp
UPLOAD_PATH=/uploads

# 邮件配置
SMTP_HOST=${SMTP_HOST}
SMTP_PORT=587
SMTP_USER=${SMTP_USER}
SMTP_PASS=${SMTP_PASS}
SMTP_SECURE=true
FROM_EMAIL=noreply-staging@motorcycle.example.com

# AWS 配置
AWS_REGION=us-west-2
AWS_S3_BUCKET=motorcycle-staging-assets
AWS_CLOUDFRONT_DOMAIN=staging-cdn.motorcycle.example.com

# 性能配置
NODE_OPTIONS="--max-old-space-size=256"
UV_THREADPOOL_SIZE=2

# Kubernetes 配置
NAMESPACE=motorcycle-staging
REPLICAS=2
CPU_REQUEST=100m
CPU_LIMIT=300m
MEMORY_REQUEST=128Mi
MEMORY_LIMIT=256Mi

# 镜像配置
REGISTRY=ghcr.io
IMAGE_NAME=motorcycle/backend
IMAGE_TAG=staging

# SSL/TLS 配置
TLS_ENABLED=true
FORCE_HTTPS=true

# 备份配置
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 3 * * *"
BACKUP_RETENTION_DAYS=14